<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>二级下拉菜单</title>
  <script src="../js/jquery-1.10.1.min.js"></script>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<div class="car-model">
  <h1>一级下拉</h1>
  <select name="yijiID" id="yijiID">
    <!-- <option value="-1">请选择</option> -->
    <option value="14">全部车型</option>
    <!-- //问题!!!!!!!!!!!!：第一个option，获取不到数据和id -->
    <option value="21">车型一</option>
    <option value="32">车型二</option>
    <option value="345">车型三</option>
    <option value="56">车型四</option>
  </select>
  <script>
  // jq的on change时间，
  // $(this).val(): 可以获取当前选择的数据的 id
  // $('select本身 option:selected').text(): 获取选中那一条的值
    $('#yijiID').on('change',function(){
      console.log($(this).val()+$('#yijiID option:selected').text())
    })
  </script>
  <h1>二级下拉</h1>
  <style>
    .jxs-drop-layer{
      max-height: 60px;
      overflow-y: scroll; /*//问题!!!!!!!!!!!!设置了超出隐藏后，二级的结构就看不到了！*/
      position: relative;
      display: none;
      background: #c3ebff;
      padding: 10px 0 0;
      border: 1px solid #333;
    }
    .mr5{
      display: block;
      padding: 5px 10px;
      border: 1px solid green;
    }
    .first-level{
      min-height: 28px;
    }
    .yiji-a{
      width: 90px;
      padding: 10px 10px;
      border-bottom: 1px solid #333;
      display: block;
    }
    .yiji-a:hover,.erji-ul li:hover{
      background: #8ec1da;
    }
    .yiji-a:hover .erji-ul{
      display: block;
    }
    .erji-ul{
      display: none;
      min-width: 100px;
      position: absolute;
      left: 110px;
      top: 0;
      padding: 0;
      border: 1px solid #333;
      background: #ebf7ff;
    }
    .erji-ul li{
      list-style: none;
      margin-bottom: 5px;
      padding: 5px 10px;
    }
   
  </style>
    <div class="first-level mr20" id="dropBtn">
      <span class="mr5" id="pullBtn">沃尔沃XC902</span><i class="icon icon-down"></i>
      <div class="jxs-drop-layer" id="dropLayer">
        <a data-id="0" class="yiji-a">全部</a>
        <a data-id="1" class="yiji-a">沃尔沃XC
          <ul class="erji-ul">
            <li data-two='22'>二级1</li>
            <li data-two='23'>二级2</li>
            <li data-two='24'>二级3</li>
            <li data-two='25'>二级4</li>
          </ul></a>
        <a data-id="2" class="yiji-a">沃尔沃903
        <ul class="erji-ul">
          <li data-two='122'>二级11</li>
          <li data-two='123'>二级12</li>
          <li data-two='124'>二级13</li>
          <li data-two='125'>二级14</li>
        </ul></a>
        <a data-id="21" class="yiji-a">沃2沃XC
          <ul class="erji-ul">
            <li data-two='222'>二级21</li>
            <li data-two='232'>二级22</li>
            <li data-two='242'>二级23</li>
            <li data-two='252'>二级24</li>
          </ul></a>
      </div>
    </div>
    <script>
    // 阻止冒泡
    function stopPop(event){
      var event = event?event:window.event;
      if(event.stopPropagation){
          event.stopPropagation();
      }else{
          event.cancelBubble = true;
      }
    }
    var isShow = false;
    $('#pullBtn').on('click',function(){
      // console.log(this);
      if(!isShow){
        isShow = true;
        $('#dropLayer').show();
        // $('#dropLayer a').on('mouseover',function(){
        //   $(this).children().show()
        // }).on('mouseout',function(){
        //   $(this).children().hide()
        // })
      }else{
        isShow = false;
        $('#dropLayer').hide();
      }
    })
    $('#dropLayer a').on('click',function(){
      isShow = false;
      $('#dropLayer').hide();
      $('#pullBtn').text(this.childNodes[0].data);
      // console.log(this.childNodes[0].data)
    })
    $('#dropLayer a ul li').on('click',function(event){
      stopPop(event);
      isShow = false;
      $('#dropLayer').hide();
      $('#pullBtn').text($(this).text());
      console.log($(this).text());
    })
    	var dropBtn = document.getElementById('dropBtn');
    	var dropBtn2 = document.getElementById('dropBtn2');
    	// dropBtn.on()
    </script>
  </div>
</body>
</html>